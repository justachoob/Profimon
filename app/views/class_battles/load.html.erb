<script>
  var knowledge = 0;
  var stamina = 10;
  var grade = 4;
  var week = 1;
  var midtermWeek = 5;
  
  function nextWeek(){
    week++;
    display_info();
    //profMove();
  }
  
  function playerMove(move, knowl, stam, grde){
    
    var out = document.getElementById("log");
    //check if there's enough stamina
    if (stam<0){
      if (stamina+stam<0){
        var stamNotif = "Not enough stamina for ";
        stamNotif = stamNotif.concat(move);
        stamNotif = stamNotif.concat("!");
        out.innerHTML = stamNotif;
        return;
      }
    }
    
    
    var notif = "<%= @current_profile.pname %>";
    notif = notif.concat(" used ");
    notif = notif.concat(move);
    notif = notif.concat("!");
    out.innerHTML = notif;
    
    stamina +=stam;
    knowledge +=knowl;
    grade += grde;
    nextWeek();
  }
  
  function display_info() {
    var out = document.getElementById("knowledge");
    out.innerHTML = knowledge;
    out = document.getElementById("stamina");
    out.innerHTML = stamina;
    out = document.getElementById("grade");
    out.innerHTML = grade;
    out = document.getElementById("curWeek");
    out.innerHTML = week;
    out = document.getElementById("midterm");
    out.innerHTML = midtermWeek;
  }
  
  function battleStart(){
    var out = document.getElementById("knowledge");
    out.innerHTML = knowledge;
    display_info();
  }
  
  
  
</script>
<body onload="battleStart()">
<div class="main">
  <h1><%= @subject %> <%= @course_number %> in session!</h1>
  <div class="class_info">
    <p>Instructor: <%= @instructor_name %></p>
    <p>Location: <%= @room_number %></p>
  </div>

  <table id="class_battle" align="center">
    <tr>
      <td style="text-align: center;">
        <%= image_tag @current_profile.avatar.url(:medium), :size => "200x200" %>
        <!-- This is the player's stamina bar -->
        <!-- Change the value of the meter using Javascript-->
        <meter value="100" min="0" max="100" id="player_stamina"></meter>

        <p><%= @current_profile.pname %></p>
        <p>GPA: <%= @current_profile.current_gpa %></p>
      </td>
      <td>
        <div style="float: left;">
          <div style="height: 50px; width: 200px">
              <!-- Put the name of the player's skill here -->
              <p id="player_speech">bb</p>
          </div>
          <!--
          <!--Add an onclick method to each of these buttons-->
          <!--All buttons should go to the same onclick method-->
          <!--Each button passes different values as parameters depending on the skill's stats-->
          <div style="margin-left: 20px;">
            <button type="button" id="button1" class="skill_button" onclick = "playerMove('Study', 2, -1, 0)">Study</button>
            <button type="button" id="button2" class="skill_button" onclick = "playerMove('Homework', 1, -2, 1)">Homework</button>
            <button type="button" id="button3" class="skill_button" onclick = "playerMove('All Nighter', 4, -5, 0)">All Nighter</button>
            <button type="button" id="button4" class="skill_button" onclick = "playerMove('Relax', 0, 3, 0)">Relax</button>
            <button type="button" id="button5" class="skill_button" onclick = "playerMove('Sleep In', -1, 5, -1)">Sleep In</button>
            <button type="button" id="button6" class="skill_button">Skill6</button>
            <button type="button" id="button7" class="skill_button">Skill7</button>
          </div>
        </div>
        <div style="float: right; height: 50px; width: 200px">
          <!-- Put the name of the profimon's skill here -->
           <p id="profimon_speech">aa</p>
        </div>
      </td>
      <td style="text-align: center;">
        <!-- We will need to have an image for a profimon and put it here -->
        <!-- Right now, this just uses the character's avatar -->
        <%= image_tag @current_profile.avatar.url(:medium), :size => "200x200" %>

        <!-- This is the profimon's stamina bar-->
        <meter value="100" min="0" max="100" id="profimon_stamina"></meter>

        <p><%= @instructor_name %></p>
      </td>
    </tr>
  </table>
  <p id = "log"></p>
  <p id = "log2"></p>
  <p id = "info">STATS:<br/>
    Knowledge: <bdi id="knowledge"></bdi><br/>
    Stamina: <bdi id="stamina"></bdi><br/>
    Grade: <bdi id="grade"></bdi><br/>
    Current week: <bdi id="curWeek"></bdi><br/>
    Midterm week: <bdi id="midterm"></bdi><br/>
  </p>
</div>
</body>
